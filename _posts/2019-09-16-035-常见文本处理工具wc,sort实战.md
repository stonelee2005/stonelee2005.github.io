---
layout:     post
title:      常见文本处理工具wc,sort实战
subtitle:   常见文本处理工具wc,sort实战
date:       2019-09-17
author:     李广雄
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - Linux练习题
---

# 常见文本处理工具wc,sort实战

---
### 取出网卡的ip地址
	
	[root@mha ~ 14:21:54]$ ifconfig enp0s3 | grep netmask | tr -s " " @ | cut -d"@" -f3
	192.168.56.102

	  
### 取出硬盘使用率(取出51到54的字符)
	[root@mha ~ 14:28:16]$ df | cut -c61-64
	  
### 列很齐的时候用什么cut选项来截取文本数据
	
	cut -c

### 在/etc/passwd中取出第1列到第3列,第7列

	[root@mha ~ 15:15:36]$ cut -d":" -f1,2,7 /etc/passwd
	root:x:/bin/bash

### 在/etc/passwd中取出第7列

	[root@mha ~ 15:15:40]$ cut -d":" -f7 /etc/passwd

### 在/etc/passwd中取出第1列到第3列,第7列输出时用@来分割

	[root@mha ~ 15:16:29]$ cut -d":" -f1,2,7 --output-delimiter=@ /etc/passwd

### /etc/system-release和/etc/issue横向合并查看

	[root@mha ~ 15:17:39]$ cat /etc/system-release /etc/issue
	CentOS Linux release 7.6.1810 (Core) 
	\S
	Kernel \r on an \m

### 把/etc/system-release和/etc/issue横向合并查看,两个文件之间的分隔符是@

	[root@mha ~ 15:25:19]$ paste /etc/system-release /etc/issue -d"@"

### 把/etc/issue所有行合成一行显示查看

	[root@mha ~ 15:28:22]$ paste -s /etc/issue
	\S	Kernel \r on an \m	

### 把/etc/system-release和/etc/issue每个文件的所有行合成一行显示查看

	[root@mha ~ 15:28:31]$ paste -s /etc/issue /etc/system-release
	\S	Kernel \r on an \m	
	CentOS Linux release 7.6.1810 (Core)

### 纵向合并查看/etc/system-release /etc/issue

	[root@mha ~ 15:28:31]$ paste -s /etc/issue /etc/system-release
	\S	Kernel \r on an \m	
	CentOS Linux release 7.6.1810 (Core)

### 分析文本的工具有哪些?

	统计工具 wc
	排序工具 sort


### 统计一下/etc/passwd

	[root@mha ~ 15:36:32]$ wc /etc/passwd
	  45   90 2370 /etc/passwd

### wc /etc/passwd输出的意思

	[root@centos6 ~ 07:33:44 ]$ tac aa | cat -b
 

### 统计/etc/passwd的行数

	[root@mha ~ 15:58:12]$ wc -l /etc/passwd
	45 /etc/passwd

### 统计/etc/passwd的单词数

	[root@mha ~ 15:58:59]$ wc -w /etc/passwd
	90 /etc/passwd


### 统计/etc/passwd的字节数

	[root@mha ~ 16:02:03]$ wc -c /etc/passwd
	2370 /etc/passwd


### 统计/etc/passwd的字符总数

	[root@mha ~ 16:03:34]$ wc -m /etc/passwd
	2370 /etc/passwd


### 统计/etc/passwd的显示文件中最长行的长度

	[root@mha ~ 16:05:35]$ wc -L /etc/passwd
	99 /etc/passwd


### 统计/var/log/messages的行数

	[root@mha ~ 16:05:43]$ wc -l /var/log/messages
	2103 /var/log/messages

### 有多少人登录系统

	[root@mha ~ 16:06:36]$ who 
	root     :0           2019-09-17 11:17 (:0)
	root     pts/0        2019-09-17 12:16 (192.168.56.1)

### 统计一下并发连接数

	[root@mha ~ 16:08:13]$ ss -nt | grep ESTAB | wc -l
	1

### 在/etc/passwd的中用uid来排序

	[root@mha ~ 16:13:24]$ sort -t":" -n -k3 /etc/passwd

### 在/etc/passwd的中用uid来倒序排序

	[root@mha ~ 16:14:15]$ sort -t":" -n -k3 -r /etc/passwd

### 在/etc/passwd的中用用户名来排序

	[root@mha ~ 16:14:46]$ sort -t":" -k1 /etc/passwd

### 在/etc/passwd的把用户名和uid,用uid来排序取出来

	[root@mha ~ 16:17:13]$ cut -d":" -f1,3 /etc/passwd | sort -t":" -k2

### 在/etc/passwd的把用户名和uid,用uid来倒序取出来

	[root@mha ~ 16:17:13]$ cut -d":" -f1,3 /etc/passwd | sort -t":" -k2 -r

### 在/etc/passwd的shell的种类排序,并取出来

	[root@mha ~ 16:20:12]$ cut -d":" -f7 /etc/passwd | sort -u
	/bin/bash
	/bin/sync
	/sbin/halt
	/sbin/nologin
	/sbin/shutdown

### 文件f1中显示前后相接的不重复的行

	[root@mha ~ 16:27:51]$ vim f1
	
	q
	q
	
	aa
	
	bbb
	
	ccc
	ccc
	
	dddddd
	ddddddddddddddddddd
	eeee
	eeee


	[root@mha ~ 16:30:49]$ uniq f1

### 文件f1中显示前后相接的不重复的行,并显示每行重复出现的次数

	[root@mha ~ 16:30:49]$ uniq -c f1
	      2 q
	      1 
	      1 aa
	      1 
	      1 bbb
	      1 
	      2 ccc
	      1 
	      1 dddddd
	      1 ddddddddddddddddddd
	      2 eeee


### 文件f1中显示前后相接的重复的行

	[root@mha ~ 10:27:29]$ uniq  -u f1
	
	aa
	
	bbb
	
	
	dddddd
	ddddddddddddddddddd


### 在httpd的日志中取出访问的IP

	[root@mha ~ 16:34:29]$ cut -d" " -f1 /var/log/httpd/access_log | sort | uniq 

### 在httpd的日志中取出访问量最大的前10名

	[root@mha ~ 10:44:13]$ cut -d" " -f1 access_log | sort -n | uniq -c | sort -nr |head

### ss -nt 查询并发连接数最多的远程IP前3个

	[root@mha ~ 10:48:15]$ ss -nt | grep ESTAB | tr -s " " : | cut -d":" -f6 | sort -n | uniq -c  | sort -nr | head -n3


## 参考资料
	

	Linux中shell提示符定制(https://blog.csdn.net/mountzf/article/details/51743207)
