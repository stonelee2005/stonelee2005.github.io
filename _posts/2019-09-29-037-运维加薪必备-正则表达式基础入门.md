---
layout:     post
title:      运维加薪必备-正则表达式基础入门
subtitle:   运维加薪必备-正则表达式基础入门
date:       2019-09-29
author:     李广雄
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - Linux练习题
---

# 运维文本处理三剑客-grep命令实战与应用

---
### /etc/passwd查找r开头t结尾的4个字符的行
	
	[root@zabbix-server ~ 2019-09-28 04:31]$ grep "r..t" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin
	ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin

### /etc/passwd查找r开头t结尾的3个字符的行

	[root@zabbix-server ~ 2019-09-28 04:40]$ grep "r.t" /etc/passwd
	operator:x:11:0:operator:/root:/sbin/nologin
	sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin
	
### /etc/passwd查找r开头t结尾的2位置adfo,3位置to范围内的4个字符的行
	
	[root@zabbix-server ~ 2019-09-28 04:41]$ grep "r[adfo][to]t" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin

### /etc/passwd查找r开头t结尾的2位置不包含kdt,3位置包含to范围内的4个字符的行

	[root@zabbix-server ~ 2019-09-28 04:41]$ grep "r[^kdt][to]t" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin


### /etc/passwd查找r开头t结尾的2位置包含字母和数字,3位置包含字母和数字范围内的4个字符的行

	[root@zabbix-server ~ 2019-09-28 04:42]$ grep "r[[:alnum:]][[:alnum:]]t" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin

	[root@zabbix-server ~ 2019-09-28 04:43]$ grep "r[[:alnum:]]\{2\}t" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin

### /etc/system-release中取出主版本号.考虑两位数

	[root@zabbix-server ~ 2019-09-28 04:44]$ grep -o "[[:digit:]]" /etc/centos-release | head -n1
	7

### grep ro*t /etc/passwd的意思

	globbing

### /etc/passwd查找r开头的任意字符

	[root@zabbix-server ~ 2019-09-28 04:46]$ grep "r.*" /etc/passwd

### grep a* anancoda-ks.cfg是当成通配符还是正则表达式

	通配符

### grep "a*" anancoda-ks.cfg是当成通配符还是正则表达式

	正则表达式

### /etc/passwd查找b开头,第二个字符为a,出现0或1次的任意字符的字符

	[root@zabbix-server ~ 2019-09-28 04:46]$ grep "ba\?" /etc/passwd

### ba\?的意思是什么

	b ba

### /etc/passwd查找r开头的o至少1个以上的任意字符的2为字符

	[root@zabbix-server ~ 2019-09-28 04:48]$ grep "ro\+" /etc/passwd

### /etc/passwd查找r开头的o重复2次2为字符

	[root@zabbix-server ~ 2019-09-28 04:47]$ grep "ro\{2\}" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	operator:x:11:0:operator:/root:/sbin/nologin

### 'aaaaaaabbbbbbbbbbbbbbb'中查找a开头的b重复3到5次2为字符

	[root@zabbix-server ~ 2019-09-28 04:51]$ echo aaaaaaabbbbbbbbbbbbbbb | grep "ab\{3,5\}"
	aaaaaaabbbbbbbbbbbbbbb

### 'aaaaaaabbbbbbbbbbbbbbb'中查找a开头的b低于5次2为字符

	[root@zabbix-server ~ 2019-09-28 04:51]$ echo aaaaaaabbbbbbbbbbbbbbb | grep "ab\{,5\}"
	aaaaaaabbbbbbbbbbbbbbb	

### 'aaaaaaabbbbbbbbbbbbbbb'中查找a开头的b高于5次2为字符

	[root@zabbix-server ~ 2019-09-28 04:52]$ echo aaaaaaabbbbbbbbbbbbbbb | grep "ab\{5,\}"
	aaaaaaabbbbbbbbbbbbbbb

### /etc/passwd中取出已root为开头的行

	[root@zabbix-server ~ 2019-09-28 04:53]$ grep "^root" /etc/passwd
	root:x:0:0:root:/root:/bin/bash

### /etc/passwd已bash结尾的行

	[root@zabbix-server ~ 2019-09-28 04:53]$ grep "bash$" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	stone:x:1000:1000:stone:/home/stone:/bin/bash

### anaconda-ks.cfg文件中查找非空行的行

	[root@zabbix-server ~ 2019-09-28 04:55]$ grep -v "^$" anaconda-ks.cfg 

### anaconda-ks.cfg文件中查找空行并打印行数

	[root@mha ~ 16:05:43]$ grep -q root /etc/passwd	

### anaconda-ks.cfg文件中查找空白行并打印行数

	[root@zabbix-server ~ 2019-09-28 04:56]$ grep "^$" anaconda-ks.cfg  -n

### /etc/passwd中查找词首r的行

	[root@zabbix-server ~ 2019-09-28 04:56]$ grep "\<r" /etc/passwd
	root:x:0:0:root:/root:/bin/bash

### /etc/passwd中查找词尾sh的行
	
	[root@zabbix-server ~ 2019-09-28 04:58]$ grep "sh\>" /etc/passwd
	root:x:0:0:root:/root:/bin/bash
	stone:x:1000:1000:stone:/home/stone:/bin/bash

### echo axx bxx cxx中显示axx 或bxx或cxx

	[root@centos7 ~ 2019-10-09 14:52]$ echo "axx bxx cxx" | grep "\(axx\|bxx\|cxx\)"
	axx bxx cxx

### echo rootrootroot中显示root显示两次

	[root@centos7 ~ 2019-10-09 14:53]$ echo rootrootroot | grep "\(root\)\{2\}"
	rootrootroot

### /etc/passwd查找root并且包含bash的字符串

	[root@centos7 ~ 2019-09-24 04:46]$ grep 'root' /etc/passwd | grep 'bash'
	root:x:0:0:root:/root:/bin/bash


### /etc/fstab上查找UUID匹配整个单词行

	[root@centos7 ~ 2019-10-09 14:50]$ grep "UUID" /etc/fstab 
	UUID=2fc269a5-e669-41a5-b02e-d235cec03cff /                       xfs     defaults        0 0
	UUID=b0d652e4-0c0c-40c7-82c1-8b7626e880ed /boot                   xfs     defaults        0 0
	UUID=06549d51-a3fc-4db3-abc8-2398ba3c801b swap                    swap    defaults        0 0

### grep egrep fgrep的区别是什么

	grep 支持正则表达式
    grep -E=egrep 支持扩展正则表达式
	fgrep 不支持正则表达式

## 参考资料
	